<!DOCTYPE html>

<html lang="en">
    <head>

        <meta content="4851b15326f6b290-09e175a0bcd24dcd-gab2f4fb87b61a9c2-c" name="google-translate-customization"/>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
        <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
        
            
        
            
        
            
        
            
        

        <!-- asciidoctor -a coderay-css=class,linkcss,source-highlighter=coderay -b html5 -D . /dev/null -->
        <style>
            /* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }

        </style>
        <style>
            /* Foundation stylesheet for CodeRay (to match GitHub theme) | MIT License | http://foundation.zurb.com */
table.CodeRay { border-collapse: collapse; padding: 2px; margin-bottom: 0; border: 0; background: transparent; }
table.CodeRay td { padding: 0 .5em; vertical-align: top; }
table.CodeRay td.line-numbers { text-align: right; color: #999; border-right: 1px solid #e5e5e5; padding-left: 0; }
span.line-numbers { border-right: 1px solid #E5E5E5; color: #999; display: inline-block; margin-right: 0.5em; padding-right: 0.5em; }
.CodeRay td.line-numbers strong, .CodeRay span.line-numbers strong { font-weight: normal; }
.CodeRay .debug { color: white !important; background: blue !important; }
.CodeRay .annotation { color: #007; }
.CodeRay .attribute-name { color: #f08; }
.CodeRay .attribute-value { color: #700; }
.CodeRay .binary { color: #509; }
.CodeRay .comment  { color: #999; font-style: italic; }
.CodeRay .char { color: #04D; }
.CodeRay .char .content { color: #04D; }
.CodeRay .char .delimiter { color: #039; }
.CodeRay .class { color: #458; }
.CodeRay .complex { color: #A08; }
.CodeRay .constant { color: teal; }
.CodeRay .color { color: #0A0; }
.CodeRay .class-variable { color: #369; }
.CodeRay .decorator { color: #B0B; }
.CodeRay .definition { color: #099; }
.CodeRay .directive { color: #088; }
.CodeRay .delimiter { color: black; }
.CodeRay .doc { color: #970; }
.CodeRay .doctype { color: #34b; }
.CodeRay .doc-string { color: #D42; }
.CodeRay .escape  { color: #666; }
.CodeRay .entity { color: #800; }
.CodeRay .error { color: #808; }
.CodeRay .exception { color: #C00; }
.CodeRay .filename { color: #099; }
.CodeRay .function { color: #900; }
.CodeRay .global-variable { color: teal; }
.CodeRay .hex { color: #058; }
.CodeRay .integer  { color: #099; }
.CodeRay .include { color: #B44; }
.CodeRay .inline { color: black; }
.CodeRay .inline .inline { background: #ccc; }
.CodeRay .inline .inline .inline { background: #bbb; }
.CodeRay .inline .inline-delimiter { color: #D14; }
.CodeRay .inline-delimiter { color: #D14; }
.CodeRay .important { color: #f00; }
.CodeRay .interpreted { color: #B2B; }
.CodeRay .instance-variable { color: teal; }
.CodeRay .label { color: #970; }
.CodeRay .local-variable { color: #963; }
.CodeRay .octal { color: #40E; }
.CodeRay .predefined { color: #369; }
.CodeRay .preprocessor { color: #579; }
.CodeRay .pseudo-class { color: #00C; }
.CodeRay .predefined-type { color: #074; }
.CodeRay .reserved, .keyword  { color: #000; }
.CodeRay .key { color: #808; }
.CodeRay .key .delimiter { color: #606; }
.CodeRay .key .char { color: #80f; }
.CodeRay .value { color: #088; }
.CodeRay .regexp { background-color: #fff0ff; }
.CodeRay .regexp .content { color: #808; }
.CodeRay .regexp .delimiter { color: #404; }
.CodeRay .regexp .modifier { color: #C2C; }
.CodeRay .regexp .function  { color: #404; font-weight: bold; }
.CodeRay .string { color: #D20; }
.CodeRay .string .string { }
.CodeRay .string .string .string { background-color: #ffd0d0; }
.CodeRay .string .content { color: #D14; }
.CodeRay .string .char { color: #D14; }
.CodeRay .string .delimiter { color: #D14; }
.CodeRay .shell { color: #D14; }
.CodeRay .shell .content { }
.CodeRay .shell .delimiter { color: #D14; }
.CodeRay .symbol { color: #990073; }
.CodeRay .symbol .content { color: #A60; }
.CodeRay .symbol .delimiter { color: #630; }
.CodeRay .tag, .CodeRay .attribute-name { color: #070; }
.CodeRay .tag-special { color: #D70; }
.CodeRay .type { color: #339; }
.CodeRay .variable  { color: #036; }
.CodeRay .insert { background: #afa; }
.CodeRay .delete { background: #faa; }
.CodeRay .change { color: #aaf; background: #007; }
.CodeRay .head { color: #f8f; background: #505; }
.CodeRay .insert .insert { color: #080; }
.CodeRay .delete .delete { color: #800; }
.CodeRay .change .change { color: #66f; }
.CodeRay .head .head { color: #f4f; }

        </style>
        <style>

            
            

            #footer {
                background-color: inherit;
                text-align: right;
            }

            #google_translate_element {
                padding-top: 32px;
            }

            
            .green {
                color: #006400;
            }

            
            .listingblock > .content pre {
                overflow: auto;
                white-space: pre;
                word-wrap: inherit;
            }

            pre {
                margin-bottom: 0.625em;
            }

            .red {
                color: #ff0000;
            }

            select {
                width: inherit;
            }

            
            .yellow {
                color: #cc0;
            }

        </style>

        <title>Problem Set 6: Web Server</title>

    </head>

    <body class="article toc2 toc-left">

        

            <div id="header">

                
                    
                        <h1>Problem Set 6: Web Server</h1>
                    
                    <span id="author" class="author">
                        This is CS50. Harvard University.
                    </span>
                

                
                    <div id="toc" class="toc2">
                        <div id="toctitle">Table of Contents</div>
                        <ul class="sectlevel1">
<li><a href="#objectives">Objectives</a></li>
<li><a href="#academic_honesty">Academic Honesty</a>
<ul class="sectlevel2">
<li><a href="#reasonable">Reasonable</a></li>
<li><a href="#not_reasonable">Not Reasonable</a></li>
</ul>
</li>
<li><a href="#getting_ready">Getting Ready</a></li>
<li><a href="#getting_started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#server_c">server.c</a>
<ul class="sectlevel3">
<li><a href="#main">main</a></li>
<li><a href="#connected">connected</a></li>
<li><a href="#error">error</a></li>
<li><a href="#freedir">freedir</a></li>
<li><a href="#handler">handler</a></li>
<li><a href="#htmlspecialchars">htmlspecialchars</a></li>
<li><a href="#indexes">indexes</a></li>
<li><a href="#interpret">interpret</a></li>
<li><a href="#list">list</a></li>
<li><a href="#load">load</a></li>
<li><a href="#lookup">lookup</a></li>
<li><a href="#parse">parse</a></li>
<li><a href="#reason">reason</a></li>
<li><a href="#redirect">redirect</a></li>
<li><a href="#request">request</a></li>
<li><a href="#respond">respond</a></li>
<li><a href="#start">start</a></li>
<li><a href="#stop">stop</a></li>
<li><a href="#transfer">transfer</a></li>
<li><a href="#urldecode">urldecode</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#what_to_do">What To Do</a>
<ul class="sectlevel2">
<li><a href="#lookup_2">lookup</a></li>
<li><a href="#parse_2">parse</a>
<ul class="sectlevel3">
<li><a href="#code_abs_path_code"><code>abs_path</code></a></li>
<li><a href="#code_query_code"><code>query</code></a></li>
</ul>
</li>
<li><a href="#load_2">load</a></li>
<li><a href="#indexes_2">indexes</a></li>
</ul>
</li>
<li><a href="#how_to_submit">How to Submit</a>
<ul class="sectlevel2">
<li><a href="#step_1_of_2">Step 1 of 2</a></li>
<li><a href="#step_2_of_2">Step 2 of 2</a></li>
</ul>
</li>
</ul>
                    </div>
                

            </div>

        

        <div id="content">
            <div class="sect1">
<h2 id="objectives"><a class="link" href="#objectives">Objectives</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Become familiar with HTTP.</p>
</li>
<li>
<p>Apply familiar techniques in unfamiliar contexts.</p>
</li>
<li>
<p>Transition from C to web programming.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="academic_honesty"><a class="link" href="#academic_honesty">Academic Honesty</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This course&#8217;s philosophy on academic honesty is best stated as "be reasonable." The course recognizes that interactions with classmates and others can facilitate mastery of the course&#8217;s material. However, there remains a line between enlisting the help of another and submitting the work of another. This policy characterizes both sides of that line.</p>
</div>
<div class="paragraph">
<p>The essence of all work that you submit to this course must be your own. Collaboration on problem sets is not permitted except to the extent that you may ask classmates and others for help so long as that help does not reduce to another doing your work for you. Generally speaking, when asking for help, you may show your code to others, but you may not view theirs, so long as you and they respect this policy&#8217;s other constraints. Collaboration on quizzes is not permitted at all. Collaboration on the course&#8217;s final project is permitted to the extent prescribed by its specification.</p>
</div>
<div class="paragraph">
<p>Below are rules of thumb that (inexhaustively) characterize acts that the course considers reasonable and not reasonable. If in doubt as to whether some act is reasonable, do not commit it until you solicit and receive approval in writing from the course&#8217;s heads. Acts considered not reasonable by the course are handled harshly. If the course refers some matter for disciplinary action and the outcome is punitive, the course reserves the right to impose local sanctions on top of that outcome that may include an unsatisfactory or failing grade for work submitted or for the course itself.</p>
</div>
<div class="paragraph">
<p>If you commit some act that is not reasonable but bring it to the attention of the course&#8217;s heads within 72 hours, the course may impose local sanctions that may include an unsatisfactory or failing grade for work submitted, but the course will not refer the matter for further disciplinary action except in cases of repeated acts.</p>
</div>
<div class="sect2">
<h3 id="reasonable"><a class="link" href="#reasonable">Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Communicating with classmates about problem sets' problems in English (or some other spoken language).</p>
</li>
<li>
<p>Discussing the course&#8217;s material with others in order to understand it better.</p>
</li>
<li>
<p>Helping a classmate identify a bug in his or her code at office hours, elsewhere, or even online, as by viewing, compiling, or running his or her code, even on your own computer.</p>
</li>
<li>
<p>Incorporating snippets of code that you find online or elsewhere into your own code, provided that those snippets are not themselves solutions to assigned problems and that you cite the snippets' origins.</p>
</li>
<li>
<p>Reviewing past semesters' quizzes and solutions thereto.</p>
</li>
<li>
<p>Sending or showing code that you&#8217;ve written to someone, possibly a classmate, so that he or she might help you identify and fix a bug.</p>
</li>
<li>
<p>Sharing snippets of your own code online so that others might help you identify and fix a bug.</p>
</li>
<li>
<p>Turning to the web or elsewhere for instruction beyond the course&#8217;s own, for references, and for solutions to technical difficulties, but not for outright solutions to problem set&#8217;s problems or your own final project.</p>
</li>
<li>
<p>Whiteboarding solutions to problem sets with others using diagrams or pseudocode but not actual code.</p>
</li>
<li>
<p>Working with (and even paying) a tutor to help you with the course, provided the tutor does not do your work for you.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="not_reasonable"><a class="link" href="#not_reasonable">Not Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Accessing a solution to some problem prior to (re-)submitting your own.</p>
</li>
<li>
<p>Asking a classmate to see his or her solution to a problem set&#8217;s problem before (re-)submitting your own.</p>
</li>
<li>
<p>Decompiling, deobfuscating, or disassembling the staff&#8217;s solutions to problem sets.</p>
</li>
<li>
<p>Failing to cite (as with comments) the origins of code or techniques that you discover outside of the course&#8217;s own lessons and integrate into your own work, even while respecting this policy&#8217;s other constraints.</p>
</li>
<li>
<p>Giving or showing to a classmate a solution to a problem set&#8217;s problem when it is he or she, and not you, who is struggling to solve it.</p>
</li>
<li>
<p>Looking at another individual&#8217;s work during a quiz.</p>
</li>
<li>
<p>Paying or offering to pay an individual for work that you may submit as (part of) your own.</p>
</li>
<li>
<p>Providing or making available solutions to problem sets to individuals who might take this course in the future.</p>
</li>
<li>
<p>Searching for, soliciting, or viewing a quiz&#8217;s questions or answers prior to taking the quiz.</p>
</li>
<li>
<p>Searching for or soliciting outright solutions to problem sets online or elsewhere.</p>
</li>
<li>
<p>Splitting a problem set&#8217;s workload with another individual and combining your work.</p>
</li>
<li>
<p>Submitting (after possibly modifying) the work of another individual beyond allowed snippets.</p>
</li>
<li>
<p>Submitting the same or similar work to this course that you have submitted or will submit to another.</p>
</li>
<li>
<p>Submitting work to this course that you intend to use outside of the course (e.g., for a job) without prior approval from the course&#8217;s heads.</p>
</li>
<li>
<p>Using resources during a quiz beyond those explicitly allowed in the quiz&#8217;s instructions.</p>
</li>
<li>
<p>Viewing another&#8217;s solution to a problem set&#8217;s problem and basing your own solution on it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_ready"><a class="link" href="#getting_ready">Getting Ready</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, join David (hey, that&#8217;s me) for a tour of HTTP, the "protocol" via which web browsers and web servers communicate.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/hU4XuBe50K4?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Next, consider reviewing some of these examples from Week 7, via which we introduced HTML, the language in which web pages are written.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/1TgTA4o_AM8?rel=0&amp;playlist=dW4giTKrgzo,GgpyVgkW_xk,whYnf7PFZ74,s1_kxTs5GfI,qyJXI2v7N8k,DQLbgo7Rzpg" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>And also some of these examples, via which we introduced CSS, the language with which web pages can be stylized.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/TKZlfZDF8Y4?rel=0&amp;playlist=VwCSw2ts388,-7wiXVMh4XY" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Next, consider reviewing some of these examples, via which we introduced HTML forms, which we used to submit GET queries to Google.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/RQ2_TIXBo00?rel=0&amp;playlist=14jiSM4CMtY,uqsKEAAvpTA,P7oACLRGnEg,AI2nKW7_pck" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>For another perspective altogether, join Daven for a tour of HTML too. Don&#8217;t miss the bloopers at the end!</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/dM5V1epAbSs?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Finally, join Joseph (and Rob) for a closer look at CSS.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/kg0ZOmUREwc?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting_started"><a class="link" href="#getting_started">Getting Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Log into <a href="https://cs50.io/">CS50 IDE</a> and, in a terminal window, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">update50</code></pre>
</div>
</div>
<div class="paragraph">
<p>to ensure that your workspace is up-to-date!</p>
</div>
<div class="paragraph">
<p>Like Problem Set 5, this problem set comes with some distribution code that you&#8217;ll need to download before getting started. Go ahead and execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">cd ~/workspace</code></pre>
</div>
</div>
<div class="paragraph">
<p>in order to navigate to your <code>~/workspace</code> directory. Then execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">wget http://cdn.cs50.net/2015/fall/psets/6/pset6/pset6.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>in order to download a ZIP (i.e., compressed version) of this problem set&#8217;s distro.  If you then execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">ls</code></pre>
</div>
</div>
<div class="paragraph">
<p>you should see that you now have a file called <code>pset6.zip</code> in your <code>~/workspace</code> directory.  Unzip it by executing the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">unzip pset6.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you again execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">ls</code></pre>
</div>
</div>
<div class="paragraph">
<p>you should see that you now also have a <code>pset6</code> directory.  You&#8217;re now welcome to delete the ZIP file with the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">rm -f pset6.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now dive into that <code>pset6</code> directory by executing the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">cd pset6</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">tree</code></pre>
</div>
</div>
<div class="paragraph">
<p>(which is a hierarchical, recursive variant of <code>ls</code>), and you should see that the directory contains the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">.
├── Makefile
├── public
│   ├── cat.html
│   ├── cat.jpg
│   ├── favicon.ico
│   ├── hello.html
│   ├── hello.php
│   └── test
│       └── index.html
└── server.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dang it, still C. But some other stuff too!</p>
</div>
<div class="paragraph">
<p>Go ahead and take a look at <code>cat.html</code>. Pretty simple, right? Looks like it has an <code>img</code> tag, the value of whose <code>src</code> attribute is <code>cat.jpg</code>.</p>
</div>
<div class="paragraph">
<p>Next, take a look at <code>hello.html</code>. Notice how it has a <code>form</code> that&#8217;s configured to submit via GET a <code>text</code> field called <code>name</code> to <code>hello.php</code>. Make sense? If not, try taking another look at the <a href="https://youtu.be/RQ2_TIXBo00">walkthrough for <code>search-0.html</code></a> from Week 7!</p>
</div>
<div class="paragraph">
<p>Now take a look at <code>hello.php</code>. Notice how it&#8217;s mostly HTML but inside its <code>body</code> is a bit of PHP code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="php language-php"><span class="inline-delimiter">&lt;?</span>= <span class="predefined">htmlspecialchars</span>(<span class="predefined">$_GET</span>[<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>]) <span class="inline-delimiter">?&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;?=</code> notation just means "echo the following value here". <code>htmlspecialchars</code>, meanwhile, is just an attrociously named function whose purpose in life is to ensure that special (even dangerous!) characters like <code>&lt;</code> are properly "escaped" as HTML "entities." See <a href="http://php.net/manual/en/function.htmlspecialchars.php">http://php.net/manual/en/function.htmlspecialchars.php</a> for more details if curious. Anyhow, <code>$_GET</code> is a "superglobal" variable inside of which are any HTTP parameters that were passed via GET to <code>hello.php</code>. More specifically, it&#8217;s an "associative array" (i.e., hash table) with keys and values. Per that HTML form in <code>hello.html</code>, one such key should be <code>name</code>! But more on all that in a bit.</p>
</div>
<div class="paragraph">
<p>Now the fun part. Open up <code>server.c</code>.</p>
</div>
<div class="paragraph">
<p>Yup. You guessed it. The challenge ahead is to implement your own web server that knows how to serve static content (i.e., files ending in <code>.html</code>, <code>.jpg</code>, et al.) and dynamic content (i.e., files ending in <code>.php</code>).</p>
</div>
<div class="paragraph">
<p>Want to try out the staff&#8217;s solution before we dive into the distribution code? Execute the below to download the latest version of the staff&#8217;s solution, as the version in CS50 IDE by default is outdated. Note that the <code>O</code> in <code>-O</code> is a capitalized letter <code>O</code>, not a zero.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">sudo wget -O ~cs50/pset6/server http://cdn.cs50.net/2015/fall/psets/6/pset6/server
sudo chmod a+x ~cs50/pset6/server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then execute the below to run the staff&#8217;s implementation of <code>server</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">~cs50/pset6/server</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see these instructions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">Usage: server [-p port] /path/to/root</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looks a bit complex, but that&#8217;s just a conventional way of saying:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This program&#8217;s name is <code>server</code>.</p>
</li>
<li>
<p>To specify a (TCP) port number on which <code>server</code> should listen for HTTP requests, include <code>-p</code> as a command-line argument, followed by (presumably) a number. The brackets imply that specifying a port is optional. (If you don&#8217;t specify, the program will default to port 8080, which is required by CS50 IDE.)</p>
</li>
<li>
<p>The last command-line argument to <code>server</code> should be the path to your server&#8217;s "root" (the directory from which files will be served).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s try it out. Execute the below from within your own <code>~/workspace/pset6</code> directory so that the staff&#8217;s solution uses your own copy of <code>public</code> as its root.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">~cs50/pset6/server public</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see output like the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash"><span class="yellow">Using /home/ubuntu/workspace/pset6/public for server's root</span>
<span class="yellow">Listening on port 8080</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Toward the top-left corner of CS50 IDE, meanwhile, click <strong>CS50 IDE &gt; Web Server</strong>, that should open your workspace&#8217;s "fully qualified domain name," an address of the form <code>ide50-username.cs50.io</code>, where <code>username</code> is your own username, in a new browser tab. You should see a "directory listing" (i.e., an unordered list) of everything that&#8217;s in <code>public</code>, yes? And if you click <strong>cat.jpg</strong>, you should see a happy cat?? If not, do just reach out to classmates or staff for a hand!</p>
</div>
<div class="paragraph">
<p>Incidentally, even though <code>server</code> is running on port 8080, CS50 IDE is "port-forwarding" port 80 (which, recall, is browsers' default) to 8080 for you. That&#8217;s why <strong>8080</strong> is not specified in the URL you just visited.</p>
</div>
<div class="paragraph">
<p>Anyhow, assuming you indeed saw a happy cat in that tab, you should also see</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">GET /cat.jpg HTTP/1.1</code></pre>
</div>
</div>
<div class="paragraph">
<p>in your terminal window, which is the "request line" that your browser sent to the server (which is being outputted by <code>server</code> via <code>printf</code> for diagnostics' sake). Below that you should see all of the headers that your browser sent to <code>server</code> followed by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash"><span class="green">HTTP/1.1 200 OK</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which is the server&#8217;s response to the browser (which is also being outputted by <code>server</code> via <code>printf</code> for diagnostics' sake).</p>
</div>
<div class="paragraph">
<p>Next, just like I did in that short on HTTP, open up Chrome&#8217;s developer tools, per the instructions at <a href="https://developer.chrome.com/devtools">https://developer.chrome.com/devtools</a>. Then, once open, click the tools' <strong>Network</strong> tab, and then, while holding down Shift, reload the page.</p>
</div>
<div class="paragraph">
<p>Not only should you see Happy Cat again. You should also see the below in your terminal window.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">GET /cat.jpg HTTP/1.1
<span class="green">HTTP/1.1 200 OK</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You might also see the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">GET /favicon.ico HTTP/1.1
<span class="green">HTTP/1.1 200 OK</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>What&#8217;s going on if so? Well, by convention, a lot of websites have in their root directory a <code>favicon.ico</code> file, which is a tiny icon that&#8217;s meant to be displayed a browser&#8217;s address bar or tab. If you do see those lines in your terminal window, that just means Chrome is guessing that your server, too, might have <code>favicon.ico</code> file, which it does!</p>
</div>
<div class="paragraph">
<p>Here&#8217;s a quick walkthrough if a demo might help.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/3dmp0ycKC5c?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Alright, now try visiting <code>https://ide50-username.cs50.io/cat.html</code>. (Note the <code>.html</code> instead of <code>.jpg</code> this time.) You should see Happy Cat again, possibly with a bit of a margin around him (simply because of Chrome&#8217;s default CSS properties). If you look at the developer tools' <strong>Network</strong> tab (possibly after reloading, if they weren&#8217;t still open), you should see that Chrome first requested <code>cat.html</code> followed by <code>cat.jpg</code>, since the latter, recall, was specified as the value of that <code>img</code> element&#8217;s <code>src</code> attribute that we saw earlier in <code>cat.html</code>. To confirm as much, take a look at the developer tools' <strong>Elements</strong> tab, wherein you&#8217;ll see a pretty-printed version of the HTML in <code>cat.html</code>. You can even change it but only Chrome&#8217;s in-memory copy thereof. To change the actual file, you&#8217;d need to do so in the usual way within CS50 IDE. Incidentally, you might find it interesting to tinker with the developer tools' <strong>Styles</strong> tab, too. Even though this page doesn&#8217;t have any CSS of its own, you can see and change (temporarily) Chrome&#8217;s default CSS properties via that tab.</p>
</div>
<div class="paragraph">
<p>Okay, one last test. Try visiting <code>https://ide50-username.cs50.io/hello.html</code>. Go ahead and input your name into the form and then submit it, as by clicking the button or hitting Enter. You should find yourself at a URL like <code>https://ide50-username.cs50.io/hello.php?name=Alice</code> (albeit with your name, not Alice&#8217;s, unless your name is also Alice), where a personalized hello awaits! That&#8217;s what we mean by "dynamic" content. By submitting that form, you provided input (i.e., your name) to the server, which then generated output just for you. (That input was in the form of an "HTTP parameter" called <code>name</code>, the value of which was your name.) Indeed, if you look at the page&#8217;s source code (as via the developer tools' <strong>Elements</strong> tab), you&#8217;ll see your name embedded within the HTML! By contrast, files like <code>cat.jpg</code> and <code>cat.html</code> (and even <code>hello.html</code>) are "static" content, since they&#8217;re not dynamically generated.</p>
</div>
<div class="paragraph">
<p>Neat, eh?? Though odds are you&#8217;ll find it easier to test your own code via a command line than with a browser. So let&#8217;s show you one other technique.</p>
</div>
<div class="paragraph">
<p>Open up a second terminal window and position it alongside your first. In the first terminal window, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">~cs50/pset6/server public</code></pre>
</div>
</div>
<div class="paragraph">
<p>from within your own <code>~/workspace/pset6</code> directory, if the server isn&#8217;t already running. Then, in the second terminal window, execute the below. (Note the <code>http://</code> this time instead of <code>https://</code>.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">curl -i http://localhost:8080/</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you haven&#8217;t used <code>curl</code> before, it&#8217;s a command-line program with which you can send HTTP requests (and more) to a server in order to see its responses. The <code>-i</code> flag tells <code>curl</code> to include responses' HTTP headers in the output. Odds are, whilst debugging your server, you&#8217;ll find it more convenient (and revealing!) to see all of that via <code>curl</code> than by poking around Chrome&#8217;s developer tools.</p>
</div>
<div class="paragraph">
<p>Incidentally, take care not to request <code>cat.jpg</code> (or any binary file) via <code>curl</code>, else you&#8217;ll see quite a mess! (You&#8217;re about to try, aren&#8217;t you.)</p>
</div>
<div class="paragraph">
<p>Unfortunately, your own copy of <code>server.c</code> isn&#8217;t quite so featureful as the staff&#8217;s solution&#8230; yet! Let&#8217;s dive into that distribution code. Let&#8217;s start with a high-level overview.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/OnAItxJhS70?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>And now a lower-level tour through the code.</p>
</div>
<div class="sect2">
<h3 id="server_c"><a class="link" href="#server_c">server.c</a></h3>
<div class="paragraph">
<p>Open up <code>server.c</code>, if not open already. Let&#8217;s take a tour.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Atop the file are a bunch of "feature test macro requirements" that allow us to use certain functions that are declared (conditionally) in the header files further below.</p>
</li>
<li>
<p>Defined next are a few constants that specify limits on HTTP requests sizes. We&#8217;ve (arbitrarily) based their values on defaults used by Apache, a popular web server. See <a href="http://httpd.apache.org/docs/2.2/mod/core.html">http://httpd.apache.org/docs/2.2/mod/core.html</a> if curious.</p>
</li>
<li>
<p>Defined next is <code>BYTES</code>, a constant the specifies how many bytes we&#8217;ll eventually be reading into buffers at a time.</p>
</li>
<li>
<p>Next are a bunch of header files, followed by a definition of <code>BYTE</code>, which we&#8217;ve indeed defined as an 8-bit <code>char</code>, followed by a bunch of prototypes.</p>
</li>
<li>
<p>Finally, just above <code>main</code> are a just a few global variables.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="main"><a class="link" href="#main">main</a></h4>
<div class="paragraph">
<p>Let&#8217;s now walk through <code>main</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Atop <code>main</code> is an initialization of what appears to be a global variable called <code>errno</code>. In fact, <code>errno</code> is defined in <code>errno.h</code> and is used by quite a few functions to indicate (via an <code>int</code>), in cases of error, precisely which error has occurred. See <code>man errno</code> for more details.</p>
</li>
<li>
<p>Shortly thereafter is a call to <code>getopt</code>, which is a function declared in <code>unistd.h</code> that makes it easier to parse command-line arguments. See <code>man 3 getopt</code> if curious. Notice how we use <code>getopt</code> (and some Boolean expressions) to ensure that <code>server</code> is used properly.</p>
</li>
<li>
<p>Next notice the call to <code>start</code> (for which you may have noticed a prototype earlier). More on that later.</p>
</li>
<li>
<p>Below that is a declaration of a <code>struct sigaction</code> via which we&#8217;ll listen for <code>SIGINT</code> (i.e., control-c), calling <code>handler</code> (a function defined by us elsewhere in <code>server.c</code>) if heard.</p>
</li>
<li>
<p>And then, after declaring some variables, <code>main</code> enters an infinite <code>while</code> loop.</p>
<div class="ulist">
<ul>
<li>
<p>Atop that loop, we first free any memory that might have been allocated by a previous iteration of the loop.</p>
</li>
<li>
<p>We then check whether we&#8217;ve been "signalled" via control-c to stop the server.</p>
</li>
<li>
<p>Thereafter, within an <code>if</code> statment, is a call to <code>connected</code>, which returns <code>true</code> if a client (e.g., a browser or even <code>curl</code>) has connected to the server.</p>
</li>
<li>
<p>After that is a call to <code>parse</code>, which parses a browser&#8217;s HTTP request, storing its "absolute path" and "query" inside of two arrays that are passed into it by reference.</p>
</li>
<li>
<p>Next is a bunch of code that decodes that path (decoding any URL-encoded characters like <code>%20</code>) and "resolves" the path to a local path, figuring out exactly what file was requested on the server itself.</p>
</li>
<li>
<p>Below that, we ascertain whether that path leads to a directory or to a file and handle the request accordingly, ultimately calling <code>list</code>, <code>interpret</code>, or <code>transfer</code>.</p>
<div class="ulist">
<ul>
<li>
<p>For directories (that don&#8217;t have an <code>index.php</code> or <code>index.html</code> file inside them), we call <code>list</code> in order to display the directory&#8217;s contents.</p>
</li>
<li>
<p>For files ending in <code>.php</code> (whose "MIME type" is <code>text/x-php</code>), we call <code>interpret</code>.</p>
</li>
<li>
<p>For other (supported) files, we call <code>transfer</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>And that&#8217;s it for <code>main</code>! Notice, though, that throughout <code>main</code> are a few uses of <code>continue</code>, the effect of which is to jump back to the start of that infinite loop. Just before <code>continue</code> in some cases, too, is a call to <code>error</code> (another function we wrote) with an HTTP status code. Together, those lines allow the server to handle and respond to errors just before returning its attention to new requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="connected"><a class="link" href="#connected">connected</a></h4>
<div class="paragraph">
<p>Take a quick peek at <code>connected</code> below <code>main</code>. Don&#8217;t fret if unsure how this function works, but do try to infer from the <code>man</code> pages for <code>memset</code> and <code>accept</code>!</p>
</div>
</div>
<div class="sect3">
<h4 id="error"><a class="link" href="#error">error</a></h4>
<div class="paragraph">
<p>Spend a bit more time looking through <code>error</code>, which is that function via which we respond to browsers with errors (e.g., 404). This function&#8217;s a bit longer but perhaps has some more familiar constructs. Before forging ahead, be sure you&#8217;re reasonably comfortable with how this function works. (If curious, we&#8217;re using <code>log10</code> simply to figure out how many digits, and thus <code>char</code>s, <code>code</code> is.)</p>
</div>
</div>
<div class="sect3">
<h4 id="freedir"><a class="link" href="#freedir">freedir</a></h4>
<div class="paragraph">
<p>This function exists simply to facilitate freeing memory that&#8217;s allocated by a function called <code>scandir</code> that we call in <code>list</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="handler"><a class="link" href="#handler">handler</a></h4>
<div class="paragraph">
<p>Thankfully, a short one! This function (called whenever a user hits control-c) essentially tells <code>main</code> to call <code>stop</code> by setting <code>signaled</code>, a global variable, to <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="htmlspecialchars"><a class="link" href="#htmlspecialchars">htmlspecialchars</a></h4>
<div class="paragraph">
<p>This function, named identically to that PHP function we saw earlier, escapes characters (e.g., <code>&lt;</code> as <code>&lt;</code>) that might otherwise "break" an HTML page. We call it from <code>list</code>, lest some file or directory we&#8217;re listing have a "dangerous" character in its name.</p>
</div>
</div>
<div class="sect3">
<h4 id="indexes"><a class="link" href="#indexes">indexes</a></h4>
<div class="paragraph">
<p>Uh oh, forgot to implement this one. About that&#8230;</p>
</div>
</div>
<div class="sect3">
<h4 id="interpret"><a class="link" href="#interpret">interpret</a></h4>
<div class="paragraph">
<p>This function enables the server to interpret PHP files. It&#8217;s a bit cryptic at first glance, but in a nutshell, all we&#8217;re doing, upon receiving a request for, say, <code>hello.php</code>, is executing a line like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="php language-php"><span class="constant">QUERY_STRING</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">name=Alice</span><span class="delimiter">&quot;</span></span> <span class="constant">REDIRECT_STATUS</span>=<span class="integer">200</span> <span class="constant">SCRIPT_FILENAME</span>=/home/ubuntu/workspace/pset6/<span class="keyword">public</span>/hello.php php-cgi</code></pre>
</div>
</div>
<div class="paragraph">
<p>the effect of which is to pass the contents of <code>hello.php</code> to PHP&#8217;s interpreter (i.e., <code>php-cgi</code>), with any HTTP parameters supplied via an "environment variable" called <code>QUERY_STRING</code>. Via <code>load</code> (a function we wrote), we then read the interpreter&#8217;s output into memory (via <code>load</code>). And then we respond to the browser with (dynamically generated) output like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="html language-html">HTTP/1.1 200 OK
X-Powered-By: PHP/5.5.9-1ubuntu4.12
Content-type: text/html

<span class="doctype">&lt;!DOCTYPE html&gt;</span>

<span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>hello<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
                    hello, Alice
            <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though the PHP code in <code>hello.php</code> is pretty-printed, it&#8217;s output isn&#8217;t quite as pretty. (Take a look at <code>hello.php</code>. Can you deduce why?)</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;re unfamiliar with <code>popen</code>. That function opens a "pipe" to a process (<code>php-cgi</code> in our case), which provides us with a <code>FILE</code> pointer via which we can read that process&#8217;s standard output (as though it were an actual file).</p>
</div>
<div class="paragraph">
<p>Notice how this function calls <code>load</code>, though, in order to read the PHP interpreter&#8217;s output into memory.</p>
</div>
</div>
<div class="sect3">
<h4 id="list"><a class="link" href="#list">list</a></h4>
<div class="paragraph">
<p>Ah, here&#8217;s that function that generates a directory listing. Notice how much code it takes to generate HTML using C, thanks to requisite memory management. (No more, come PHP in Problem Set 7!)</p>
</div>
</div>
<div class="sect3">
<h4 id="load"><a class="link" href="#load">load</a></h4>
<div class="paragraph">
<p>Phew, a short one. Oh, wait.</p>
</div>
</div>
<div class="sect3">
<h4 id="lookup"><a class="link" href="#lookup">lookup</a></h4>
<div class="paragraph">
<p>Dang, another.</p>
</div>
</div>
<div class="sect3">
<h4 id="parse"><a class="link" href="#parse">parse</a></h4>
<div class="paragraph">
<p>Aaaaand, another. But the last of our TODOs!</p>
</div>
</div>
<div class="sect3">
<h4 id="reason"><a class="link" href="#reason">reason</a></h4>
<div class="paragraph">
<p>This function simply maps HTTP "status codes" (e.g., <code>200</code>) to "reason phrases" (e.g., <code>OK</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="redirect"><a class="link" href="#redirect">redirect</a></h4>
<div class="paragraph">
<p>Ah, neat, this function redirects a client to another location (i.e., URL) by sending a status code of <code>301</code> plus a <code>Location</code> header.</p>
</div>
</div>
<div class="sect3">
<h4 id="request"><a class="link" href="#request">request</a></h4>
<div class="paragraph">
<p>Ah, this one&#8217;s a biggie. But worth reading through. When the server receives a request from a client, the server doesn&#8217;t know in advance how many characters the request will comprise. And so this function iteratively reads bytes from the client, one buffer&#8217;s worth at a time, calling <code>realloc</code> as needed to store the entire message (i.e., request).</p>
</div>
<div class="paragraph">
<p>Notice this function&#8217;s use of pointers, dynamic memory allocation, pointer arithmetic, and more. All somewhat familiar by now, but definitely a lot of it all in once place! Do try to understand each and every line, if only for the practice. Ultimately, it keeps reading bytes from the client until it encounters \r\n\r\n (aka CRLF CRLF), which, according to HTTP&#8217;s spec, marks the end of a request&#8217;s headers.</p>
</div>
<div class="paragraph">
<p>If curious, know that <code>read</code> is quite like <code>fread</code> except that it reads from a "file descriptor" (i.e., an <code>int</code>) instead of from a <code>FILE</code> pointer (i.e., <code>FILE*</code>). See its <code>man</code> page for more.</p>
</div>
<div class="paragraph">
<p>Phew.</p>
</div>
</div>
<div class="sect3">
<h4 id="respond"><a class="link" href="#respond">respond</a></h4>
<div class="paragraph">
<p>It&#8217;s this function that actually sends to a client an HTTP response, given a status code, heads, a body, and that body&#8217;s length. For instance, it&#8217;s this function that sends a response like the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="html language-html">HTTP/1.1 200 OK
X-Powered-By: PHP/5.5.9-1ubuntu4.12
Content-type: text/html

<span class="doctype">&lt;!DOCTYPE html&gt;</span>

<span class="tag">&lt;html&gt;</span>
    <span class="tag">&lt;head&gt;</span>
        <span class="tag">&lt;title&gt;</span>hello<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;/head&gt;</span>
    <span class="tag">&lt;body&gt;</span>
                    hello, Alice
            <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Know that <code>dprintf</code> is quite like <code>printf</code> (or, really, <code>fprintf</code>) except that the former, like <code>read</code>, writes to a "file descriptor" instead of to a <code>FILE*</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="start"><a class="link" href="#start">start</a></h4>
<div class="paragraph">
<p>Here&#8217;s that function that started it all (pun intended). Don&#8217;t worry if (even with <code>man</code>) you don&#8217;t understand all of its lines, particularly the networking code. But do keep in mind that <code>start</code> is the function that configures the server to listen for connections on a particular TCP port!</p>
</div>
</div>
<div class="sect3">
<h4 id="stop"><a class="link" href="#stop">stop</a></h4>
<div class="paragraph">
<p>And <code>stop</code> does the opposite, freeing all memory and ultimately compelling the server to exit, without even returning control to <code>main</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="transfer"><a class="link" href="#transfer">transfer</a></h4>
<div class="paragraph">
<p>This function&#8217;s purpose in life is to transfer a file from the server to a client. Whereas <code>interpret</code> handles dynamic content (generated by PHP scripts), <code>transfer</code> handles static content (e.g., JPEGs). Notice how this function calls <code>load</code> in order to read some file from disk.</p>
</div>
</div>
<div class="sect3">
<h4 id="urldecode"><a class="link" href="#urldecode">urldecode</a></h4>
<div class="paragraph">
<p>This function, also named after a PHP function, URL-decodes a string, converting special characters like <code>%20</code> back to their original values.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what_to_do"><a class="link" href="#what_to_do">What To Do</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Alright, let&#8217;s tackle those <code>TODO</code>s.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/BYdgkUkchbQ?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="sect2">
<h3 id="lookup_2"><a class="link" href="#lookup_2">lookup</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>lookup</code> in such a way that it returns</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>text/css</code> for any file whose <code>path</code> ends in <code>.css</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>text/html</code> for any file whose <code>path</code> ends in <code>.html</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>image/gif</code> for any file whose <code>path</code> ends in <code>.gif</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>image/x-icon</code> for any file whose <code>path</code> ends in <code>.ico</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>image/jpeg</code> (not <code>image/jpg</code>) for any file whose <code>path</code> ends in <code>.jpg</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>text/javascript</code> for any file whose <code>path</code> ends in <code>.js</code> (or any capitalization thereof),</p>
</li>
<li>
<p><code>text/x-php</code> for any file whose <code>path</code> ends in <code>.php</code> (or any capitalization thereof), or</p>
</li>
<li>
<p><code>image/png</code> for any file whose <code>path</code> ends in <code>.png</code> (or any capitalization thereof), or</p>
</li>
<li>
<p><code>NULL</code> otherwise.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>strcasecmp</code>, <code>strcpy</code>, and/or <code>strrchr</code> of help!</p>
</div>
</div>
<div class="sect2">
<h3 id="parse_2"><a class="link" href="#parse_2">parse</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>parse</code> in such a way that the function parses (i.e., iterates over) <code>line</code>, extracting its absolute-path and query and storing them at <code>abs_path</code> and <code>query</code>, respectively.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how.</p>
</div>
<div class="sect3">
<h4 id="code_abs_path_code"><a class="link" href="#code_abs_path_code"><code>abs_path</code></a></h4>
<div class="paragraph">
<p>Per 3.1.1 of <a href="http://tools.ietf.org/html/rfc7230">http://tools.ietf.org/html/rfc7230</a>, a <code>request-line</code> is defined as</p>
</div>
<div class="literalblock">
<div class="content">
<pre>method SP request-target SP HTTP-version CRLF</pre>
</div>
</div>
<div class="paragraph">
<p>wherein <code>SP</code> represents a single space (<code> </code>) and <code>CRLF</code> represents <code>\r\n</code>. None of <code>method</code>, <code>request-target</code>, and <code>HTTP-version</code>, meanwhile, may contain <code>SP</code>.</p>
</div>
<div class="paragraph">
<p>Per 5.3 of the same RFC, <code>request-target</code>, meanwhile, can take several forms, the only one of which your server needs to support is</p>
</div>
<div class="literalblock">
<div class="content">
<pre>absolute-path [ "?" query ]</pre>
</div>
</div>
<div class="paragraph">
<p>whereby <code>absolute-path</code> (which will not contain <code>?</code>) must start with <code>/</code> and might optionally be followed by a <code>?</code> followed by a <code>query</code>, which may not contain <code>"</code>.</p>
</div>
<div class="paragraph">
<p>Ensure that <code>request-line</code> (which is passed into <code>parse</code> as <code>line</code>) is consistent with these rules. If it is not, respond to the browser with <strong>400 Bad Request</strong> and return <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Even if <code>request-line</code> is consistent with these rules,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if <code>method</code> is not <code>GET</code>, respond to the browser with <strong>405 Method Not Allowed</strong> and return <code>false</code>;</p>
</li>
<li>
<p>if <code>request-target</code> does not begin with <code>/</code>, respond to the browser with <strong>501 Not Implemented</strong> and return <code>false</code>;</p>
</li>
<li>
<p>if <code>request-target</code> contains a <code>"</code>, respond to the browser with <strong>400 Bad Request</strong> and return <code>false</code>;</p>
</li>
<li>
<p>if <code>HTTP-version</code> is not <code>HTTP/1.1</code>, respond to the browser with <strong>505 HTTP Version Not Supported</strong> and return <code>false</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>strchr</code>, <code>strcpy</code>, <code>strncmp</code>, <code>strncpy</code>, and/or <code>strstr</code> of help!</p>
</div>
<div class="paragraph">
<p>If all is well, store <code>absolute-path</code> at the address in <code>abs_path</code> (which was also passed into <code>parse</code> as an argument). You may assume that the memory to which <code>abs_path</code> points will be at least of length <code>LimitRequestLine</code> + 1.</p>
</div>
<div class="paragraph">
<p>If you&#8217;d like to test your code with <code>check50</code>, you can execute the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">check50 2015.fall.pset6.server1 server.c</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="code_query_code"><a class="link" href="#code_query_code"><code>query</code></a></h4>
<div class="paragraph">
<p>Store at the address in <code>query</code> the <code>query</code> substring from <code>request-target</code>. If that substring is absent (even if a <code>?</code> is present), then <code>query</code> should be <code>""</code>, thereby consuming one byte, whereby <code>query[0]</code> is <code>'\0'</code>. You may assume that the memory to which <code>query</code> points will be at least of length <code>LimitRequestLine</code> + 1.</p>
</div>
<div class="paragraph">
<p>For instance, if <code>request-target</code> is <code>/hello.php</code> or <code>/hello.php?</code>, then <code>query</code> should have a value of <code>""</code>. And if <code>request-target</code> is <code>/hello.php?q=Alice</code>, then <code>query</code> should have a value of <code>q=Alice</code>.</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;ll find functions like <code>strchr</code>, <code>strcpy</code>, <code>strncpy</code>, and/or <code>strstr</code> of help!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="load_2"><a class="link" href="#load_2">load</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>load</code> in such a way that the function:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>reads all available bytes from <code>file</code>,</p>
</li>
<li>
<p>stores those bytes contiguously in dynamically allocated memory on the heap,</p>
</li>
<li>
<p>stores the address of the first of those bytes in <code>*content</code>, and</p>
</li>
<li>
<p>stores the number of bytes in <code>*length</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that <code>content</code> is a "pointer to a pointer" (i.e., <code>BYTE**</code>), which means that you can effectively "return" a <code>BYTE*</code> to whichever function calls <code>load</code> by dereferencing <code>content</code> and storing the address of a <code>BYTE</code> at <code>*content</code>. Meanwhile, <code>length</code> is a pointer (i.e., <code>size_t*</code>), which you can also dereference in order to "return" a <code>size_t</code> to whichever function calls <code>load</code> by dereferencing <code>length</code> and storing a number at <code>*length</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="indexes_2"><a class="link" href="#indexes_2">indexes</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>indexes</code> in such a way that the function, given a <code>/path/to/a/directory</code>, returns <code>/path/to/a/directory/index.php</code> if <code>index.php</code> actually exists therein, or <code>/path/to/a/directory/index.html</code> if <code>index.html</code> actually exists therein, or <code>NULL</code>. In the first of those cases, this function should dynamically allocate memory on the heap for the returned string.</p>
</div>
<div class="paragraph">
<p>If you&#8217;d like to test your code further with <code>check50</code> (once <code>parse</code>, <code>query</code>, <code>load</code>, and <code>indexes</code> are implemented), you can execute the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay"><code class="bash language-bash">check50 2015.fall.pset6.server2 server.c</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how_to_submit"><a class="link" href="#how_to_submit">How to Submit</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="step_1_of_2"><a class="link" href="#step_1_of_2">Step 1 of 2</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When ready to submit, log into <a href="https://cs50.io/">CS50 IDE</a>.</p>
</li>
<li>
<p>Toward CS50 IDE&#8217;s top-left corner, within its "file browser" (not within a terminal window), control-click or right-click your <code>pset6</code> folder and then select <strong>Download</strong>. You should find that your browser has downloaded <code>pset6.zip</code>.</p>
</li>
<li>
<p>In a separate tab or window, log into <a href="http://cs50.edx.org/submit">CS50 Submit</a>, logging in if prompted.</p>
</li>
<li>
<p>Click <strong>Submit</strong> toward the window&#8217;s top-left corner.</p>
</li>
<li>
<p>Under <strong>Problem Set 6</strong> on the screen that appears, click <strong>Upload New Submission</strong>.</p>
</li>
<li>
<p>On the screen that appears, click <strong>Add files&#8230;</strong>.  A window entitled <strong>Open Files</strong> should appear.</p>
</li>
<li>
<p>Navigate your way to <code>pset6.zip</code>. Odds are it&#8217;s in your <strong>Downloads</strong> folder or wherever your browser downloads files by default.  Once you find <code>pset6.zip</code>, click it once to select it, then click <strong>Open</strong> (or the like).</p>
</li>
<li>
<p>Click <strong>Start upload</strong> to upload all of your files at once to CS50&#8217;s servers.</p>
</li>
<li>
<p>On the screen that appears, you should see a window with <strong>No File Selected</strong>.  If you move your mouse toward the window&#8217;s lefthand side, you should see a list of the files you uploaded.  Click each to confirm the contents of each.  (No need to click any other buttons or icons.)  If confident that you submitted the files you intended, consider your source code submitted!  If you&#8217;d like to re-submit different (or modified) files, simply return to
<a href="http://cs50.edx.org/submit">CS50 Submit</a> and repeat these steps.  You may re-submit as many times as you&#8217;d like; we&#8217;ll grade your most recent submission, so long as it&#8217;s before the deadline.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="step_2_of_2"><a class="link" href="#step_2_of_2">Step 2 of 2</a></h3>
<div class="paragraph">
<p>Head to <a href="http://cs50.edx.org/2016/psets/6/">http://cs50.edx.org/2016/psets/6/</a> where a short form awaits.  Once you have submitted that form (as well as your source code), you are done! If you end up resubmitting your files (per step 1 of 2), no need to resubmit the form.</p>
</div>
<div class="paragraph">
<p>This was Problem Set 6.</p>
</div>
</div>
</div>
</div>
        </div>
        
        

        <div id="footer">
            Copyright &#169; David J. Malan
        </div>

        <script>

            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-8162502-43']);
            _gaq.push(['_trackPageview']);

            (function() {
              var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
              ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
              var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();

        </script>

    </body>
</html>